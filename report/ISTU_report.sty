%!TEX root = main.tex
\ProvidesPackage{ISTU_practice}[2015/06/30 Practice report with ISTU guidelines]

\usepackage{lipsum}
\usepackage{extsizes}
\usepackage{titlesec}
\usepackage{cmap} % searchable letters in PDF

% russian stuff
\usepackage[T2A]{fontenc}
\usepackage[utf8x]{inputenc}
\usepackage[russian]{babel}
\usepackage{pscyr}
% end russian stuff

% set times new roman default type face
% WARNING BOLD IS NOT WORKING
	%\renewcommand{\rmdefault}{ftm}
% you think anyone recognize computer modern instead times, aren't you?

\usepackage{graphicx} % this package allow you to include advanced graphics
\graphicspath{{pics/}}
\usepackage{amssymb,amsfonts,amsmath,amsthm} % advanced math stuff
\usepackage{float} % pictures EXACTLY where it's placed [H]

%indent of first line of paragraph
\usepackage{indentfirst}
\parindent=1.25cm

% in-text styles
\usepackage{cancel} % cross-out text
\usepackage[normalem]{ulem} % advanced underlines
\usepackage{soulutf8}

\usepackage[usenames,dvipsnames,table]{xcolor} % names of colors
\usepackage{makecell}

\usepackage{tocloft}
\usepackage{import}
\usepackage{lastpage}
\usepackage{etoolbox}
\usepackage[title,titletoc]{appendix}
\usepackage{pdfpages} % this package allow you to include ready PDF-files
\usepackage{pdflscape} % landscape pages in pdf

\usepackage{hyperref}
\hypersetup{
  hidelinks
}

\usepackage{setspace}

% some stuff for anvaced tables
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{hhline}
\usepackage{multirow}
% also "multicol" allow you to write part of text in two columns
\usepackage{multicol}
\usepackage{booktabs}
\usepackage{array}
\setlength{\multicolsep}{-7pt}

% restrict hyphenations...
\hyphenpenalty=10000
% ...and restrict lines go out of \textwidth (smth like justify)
\sloppy

% date format
\usepackage{datetime}
\newdateformat{onlyyear}{\THEYEAR~г.}

% margin
\usepackage{geometry}
\geometry{left=3cm}
\geometry{right=1cm}
\geometry{top=1.5cm}
\geometry{bottom=2cm}
\geometry{heightrounded}
\geometry{marginparwidth=2.5cm}
%\geometry{marginparsep=2cm}

\usepackage{marginnote}
\renewcommand*{\marginfont}{\color{red}\footnotesize}

\reversemarginpar

\renewcommand{\marginnote}[2][]{}

\usepackage{afterpage}

%% style of unordered lists
\usepackage{enumitem}
\renewcommand{\labelitemi}{---}
\renewcommand{\labelenumi}{\asbuk{enumi})}
\renewcommand{\labelenumii}{\arabic{enumii})}
%% style of ordered lists
%% like 1.1.1 - third level
\renewcommand{\theenumi}{\arabic{enumi}}
\renewcommand{\labelenumi}{\arabic{enumi}.}
\renewcommand{\theenumii}{\arabic{enumii}}
\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}.}
\renewcommand{\theenumiii}{\arabic{enumiii}}
\renewcommand{\labelenumiii}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}.}

%% like a) - 1)
% \makeatletter
%     \AddEnumerateCounter{\asbuk}{\@asbuk}{м)}
% \makeatother
% \setlist{nolistsep}

\newenvironment{itemize*}
  {\begin{itemize}[leftmargin=0mm, itemindent=2cm]
    \vspace{-0.3cm}
    \setlength{\itemsep}{1pt}
    \setlength{\parskip}{1pt}}
  {\end{itemize}}
\newenvironment{enumerate*}
  {\begin{enumerate}[leftmargin=0mm, itemindent=2cm]
    \vspace{-0.3cm}
    \setlength{\itemsep}{1pt}
    \setlength{\parskip}{1pt}}
  {\end{enumerate}}
\newenvironment{arabicenumerate*}
  {\begin{enumerate}[label={\arabic*)}]
    \vspace{-0.3cm}
    \setlength{\itemsep}{1pt}
    \setlength{\parskip}{1pt}}
  {\end{enumerate}}

% advanced headers'n'footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\textcolor[gray]{0.4}{\thepage}}
\fancyheadoffset{0mm}
\fancyfootoffset{0mm}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancypagestyle{plain}{
	\fancyhf{}
	\cfoot{\textcolor[gray]{0.4}{\thepage}}
}


% headlines styles
% use section and subsection
\titleformat{\section}
{\pagebreak\bfseries\normalsize\centering}
{\thesection}
{1em}{}

\titleformat{\subsection}
{\normalsize\bfseries}
{\thesubsection}
{1em}{}

\titleformat{\subsubsection}
{\normalsize}
{\thesubsubsection}
{1em}{}

\titleformat{\chapter}
{\pagebreak\bfseries\normalsize\centering}
{\thechapter}
{1em}{}


\titlespacing*{\section}{\parindent}{*4}{*4}
\titlespacing*{\subsection}{\parindent}{*4}{*2}
\titlespacing*{\subsubsection}{\parindent}{*4}{*2}
\titlespacing*{\chapter}{\parindent}{*4}{*4}
% end headlines styles

% captions in subfigures
\numberwithin{table}{section}
\usepackage[tableposition=top]{caption}
\usepackage{subcaption}
\numberwithin{figure}{section}

\renewcommand{\thesubfigure}{\asbuk{subfigure}}
\DeclareCaptionLabelFormat{gostfigure}{Рисунок #2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelSeparator{gost}{~---~}
\captionsetup{labelsep=gost}
\captionsetup[figure]{labelformat=gostfigure}
\captionsetup[table]{labelformat=gosttable}


\usepackage{framed} % allow you to put text im frame
\usepackage{marvosym} % symbols, smiles, icons

\usepackage{tocloft}
\renewcommand{\cfttoctitlefont}{\hspace{0.38\textwidth}\bfseries\normalsize}
\renewcommand{\cftsecfont}{\normalsize{\hspace{1.25cm}}}
\renewcommand{\cftsubsecfont}{\hspace{1.25cm}}
\renewcommand{\cftbeforesecskip}{0em}
\setcounter{tocdepth}{4}
\makeatletter
\renewcommand{\l@section}{\@dottedtocline{1}{1.25cm}{0.5cm}}
\renewcommand{\l@subsection}{\@dottedtocline{1}{1.75cm}{1cm}}
\renewcommand{\l@subsubsection}{\@dottedtocline{1}{2.25cm}{1.25cm}}
\makeatother

%\bibliographystyle{ugost2008ls} %alphabetical order
\bibliographystyle{ugost2008l} %cite order
\addto\captionsrussian{\def\refname{}}


% \patchcmd{\thebibliography}{\chapter*}{\section*}{}{}
\makeatletter
\makeatletter
\renewenvironment{thebibliography}[1]
     {\refname%
      \thispagestyle{empty}% change the style to suit to your needs
      \@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}%
      \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
            \leftmargin\labelwidth
            \advance\leftmargin\labelsep
            \@openbib@code
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy
      \clubpenalty4000
      \@clubpenalty \clubpenalty
      \widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}
\makeatother

\newcounter{apps}
\setcounter{apps}{0}
\def\theapps{\Asbuk{apps}}
\newcommand{\app}[2]{
  \def\thesection{\Asbuk{section}}
  \refstepcounter{apps}
  \refstepcounter{section}
  \section*{Приложение~\theapps: #1}
  \addcontentsline{toc}{section}{Приложение~\theapps: #1}
  \label{sec:#2}
}

\usepackage{customCodes}

\newcommand{\undertext}[2]{\raisebox{-\baselineskip+0.17cm}{\shortstack{\underline{#1}\\\footnotesize{#2}}}}

\usepackage{scrextend}


\endinput